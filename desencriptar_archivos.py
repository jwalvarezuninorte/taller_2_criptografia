import os
from AES_File_Encryption import decrypt, getKey


# Una vez se haya pagado el secuestro de los archivos se procede a:
# 1. Definir la ruta de los archivos encriptados
# 2. Definir la clave de desencriptaciÃ³n pasada por el atacante

BASE_DIR = "/home/jwalvarez/Documents/taller_2_criptografia/PC"
password = "107694735509200125417885637848309577026224809827817089513772178803705506073500435668149580970885714303610847004660121980161625023410464347298605537294739862336311202060175221343946767620918859807734699485124082741086783524284559459910911723565260014628920317809353649851045760093842209698684773567281826043939464713485816408930085029293876330564789622310198158676932859941511992858489891085072534667997821272595856467843053840953358394463688316994010044333032491127811875284174241316461743663206618103912141845241903246814348178741643766798317391399896853646804554133243896510043147283215639692541226308549846472426080966738207016359723418687978344680519857239779129942515987248130134837212468954704186190338583876507485971590918428600527299524718477585914077231181609796782468169615109360677924826884690748100742183774454268985812608826508870199063216479275550290248085559197812659881288032441524404620101729149650827360497110564746937084894199847626503318397938550670905602709169286887035156349362228377173787182749165013710098816786139140860813390540909558405447428618209543595443678821635848713694556760779594993588653937430044086105877633499250251620024743924236170672865047464838321166221506426189394039682847391419320862444798"
key = getKey(password)

files = []
with open(f'{BASE_DIR}/.archivos_encriptados', 'r') as f:
    for line in f:
        file = line.rstrip() + '.enc'
        decrypt(key, file)
        os.remove(file)

print('Archivos desencriptados con exito ðŸ˜‡')
